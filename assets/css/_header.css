/*
==============================================================================
LUVEX THEME v4.2 - HEADER NAVIGATION (KORRIGIERT)
==============================================================================

Description: Korrekte Implementierung des 3-Level Navigation Systems
- Level 1: Horizontal Hauptmenü
- Level 2: Horizontal unterhalb der Level 1 Items (bei deren X-Position beginnend)  
- Level 3: Vertikal nach unten von Level 2 Items

Dependencies: _variables.css, _core.css
Last Update: 2025-08-23 (Fixed)

==============================================================================
*/

/* ==========================================================================
   1. HEADER & MAIN NAVIGATION SETUP
   ========================================================================== */
.site-header {
    background: rgba(27, 42, 73, 0.95);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(109, 213, 237, 0.2);
    position: relative;
    z-index: 1000;
}

.header-container {
    max-width: 1600px;
    margin: 0 auto;
    padding: 0 2rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 80px;
}

.main-navigation {
    flex-grow: 1;
    display: flex;
    justify-content: center;
}

.main-navigation > ul {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
    position: relative; /* Wichtig für das Positioning-System */
}

/* ==========================================================================
   2. LEVEL 1 - HAUPTMENÜ ITEMS  
   ========================================================================== */

/* KORREKTUR: Level 1 Items brauchen 'position: relative' als Anker für Level 2 */
.main-navigation > ul > li {
    position: relative; /* GEÄNDERT von 'static' zu 'relative' */
}

.main-navigation > ul > li > a {
    color: var(--luvex-white);
    font-size: 1.05rem;
    font-weight: 500;
    text-decoration: none;
    position: relative;
    transition: all 0.3s ease;
    padding: 29px 2.2rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.main-navigation > ul > li > a:hover {
    color: var(--luvex-bright-cyan);
}

/* ==========================================================================
   3. LEVEL 2 - HORIZONTAL SUB-MENU (KORRIGIERT)
   ========================================================================== */

.main-navigation > ul > li > .sub-menu {
    /* KORREKTUR: Positionierung relativ zum Parent-Item, nicht zum Header */
    position: absolute;
    top: 100%; /* Direkt unter dem Parent-Item */
    left: 0;   /* Beginnt bei der linken Kante des Parent-Items */
    
    /* KORREKTUR: Entferne 'right: 0' und 'width: 100%' */
    min-width: max-content; /* Passt sich dem Inhalt an */
    white-space: nowrap;    /* Verhindert Umbrüche */
    
    background: var(--luvex-dark-blue);
    box-shadow: var(--shadow-lg);
    border-top: 1px solid rgba(109, 213, 237, 0.2);
    border-radius: 0 0 var(--radius-md) var(--radius-md);
    padding: 0;
    
    /* Flexbox für horizontale Anordnung */
    display: flex;
    gap: 0; /* Kein Gap, Items liegen direkt aneinander */

    /* Animation & Sichtbarkeit */
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
    
    /* Z-Index um über andere Elemente zu liegen */
    z-index: 1001;
}

/* Show Level 2 on hover */
.main-navigation > ul > li:hover > .sub-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

/* Level 2 Menu Items */
.main-navigation > ul > li > .sub-menu > li {
    position: relative; /* Wichtig für Level 3 Positionierung */
}

.main-navigation > ul > li > .sub-menu > li > a {
    color: var(--luvex-white);
    font-weight: 500;
    padding: 1.2rem 1.5rem;
    display: block;
    position: relative;
    transition: color 0.3s ease;
    white-space: nowrap;
}

.main-navigation > ul > li > .sub-menu > li > a:hover {
    color: var(--luvex-bright-cyan);
    background: rgba(109, 213, 237, 0.1);
}

/* Underline effect für Level 2 Items */
.main-navigation > ul > li > .sub-menu > li > a::after {
    content: '';
    position: absolute;
    bottom: 1rem;
    left: 1.5rem;
    width: calc(100% - 3rem);
    height: 2px;
    background: var(--luvex-bright-cyan);
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.main-navigation > ul > li > .sub-menu > li > a:hover::after {
    transform: scaleX(1);
}

/* ==========================================================================
   4. LEVEL 3 - VERTICAL SUB-SUB-MENU (KORREKT)
   ========================================================================== */

/* Level 3 Container */
.main-navigation .sub-menu .sub-menu {
    position: absolute;
    top: 100%; /* Direkt unter dem Level 2 Item */
    left: 0;   /* Beginnt bei der linken Kante des Level 2 Items */
    min-width: 240px;
    
    background: var(--luvex-dark-blue);
    border-radius: 0 0 var(--radius-md) var(--radius-md);
    box-shadow: var(--shadow-md);
    border: 1px solid rgba(109, 213, 237, 0.2);
    border-top: none;
    
    /* Vertikale Anordnung (Standard Block-Layout) */
    display: block;
    padding: 0.5rem 0;

    /* Animation */
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
    
    z-index: 1002; /* Höher als Level 2 */
}

/* Show Level 3 on hover */
.main-navigation .sub-menu > li:hover > .sub-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

/* Level 3 Menu Items */
.main-navigation .sub-menu .sub-menu li {
    width: 100%;
}

.main-navigation .sub-menu .sub-menu a {
    padding: 0.75rem 1.5rem;
    color: var(--luvex-white);
    display: block;
    transition: all 0.3s ease;
}

.main-navigation .sub-menu .sub-menu a:hover {
    background: rgba(109, 213, 237, 0.1);
    color: var(--luvex-bright-cyan);
    padding-left: 2rem; /* Subtle Einrückung bei Hover */
}

/* ==========================================================================
   5. DROPDOWN ARROWS & INDICATORS
   ========================================================================== */

/* Pfeil für Level 1 Items mit Sub-Menu */
.main-navigation > ul > li.menu-item-has-children > a .dropdown-arrow {
    transition: transform 0.3s ease;
}

.main-navigation > ul > li.menu-item-has-children:hover > a .dropdown-arrow {
    transform: rotate(180deg);
}

/* Pfeil für Level 2 Items mit Sub-Menu */
.main-navigation .sub-menu > li.menu-item-has-children > a::after {
    content: '▶';
    position: absolute;
    right: 1rem;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.8rem;
    transition: transform 0.3s ease;
}

.main-navigation .sub-menu > li.menu-item-has-children:hover > a::after {
    transform: translateY(-50%) rotate(90deg);
}

/* ==========================================================================
   6. RESPONSIVE & ASTRA OVERRIDES
   ========================================================================== */

/* Verstecke Astra's Standard-Elemente */
.main-navigation .ast-arrow-svg,
.main-navigation .ast-menu-toggle,
.ast-desktop .ast-menu-toggle {
    display: none !important;
}

/* Mobile Breakpoint */
@media (max-width: 1024px) { 
    .main-navigation {
        display: none;
    }
    
    /* Mobile Menu wird durch separates System behandelt */
}

/* ==========================================================================
   7. DEBUG & QUALITY ASSURANCE (TEMPORÄR)
   ========================================================================== */

/* Nur für Development - entfernen in Production */
[data-debug="true"] .main-navigation .sub-menu {
    border: 2px solid red !important;
}

[data-debug="true"] .main-navigation .sub-menu .sub-menu {
    border: 2px solid blue !important;
}

/* ==========================================================================
   8. SMART POSITIONING CLASSES (FÜR JAVASCRIPT)
   ========================================================================== */

/* Positionierung für Level 2 Menüs die über den Viewport hinausgehen */
.main-navigation .sub-menu.position-right {
    left: auto;
    right: 0;
}

.main-navigation .sub-menu.position-center {
    left: 50%;
    transform: translateX(-50%);
}

.main-navigation .sub-menu.position-center.show {
    transform: translateX(-50%) translateY(0);
}

/* Positionierung für Level 3 Menüs die nach oben öffnen sollen */
.main-navigation .sub-menu .sub-menu.position-up {
    top: auto;
    bottom: 100%;
    transform: translateY(-10px);
}

.main-navigation .sub-menu > li:hover > .sub-menu.position-up {
    transform: translateY(0);
}

/* ==========================================================================
   9. HOVER-STATES & TRANSITIONS (VERBESSERT)
   ========================================================================== */

/* Sanftere Hover-Transitions für bessere UX */
.main-navigation a {
    transition: all 0.2s ease;
}

/* Hover-Delay für Level 3, um versehentliches Öffnen zu vermeiden */
.main-navigation .sub-menu > li.menu-item-has-children .sub-menu {
    transition-delay: 0.1s;
}

.main-navigation .sub-menu > li.menu-item-has-children:hover .sub-menu {
    transition-delay: 0s;
}